<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="title">Prodiga Booking Category Configuration</ui:define>
    <ui:define name="viewname">
        <li>Pages</li>
        <li>/</li>
        <li><p:link outcome="/booking-categories">Booking Categories Configuration</p:link></li>
    </ui:define>

    <ui:define name="content">
        <div class="ui-g">
            <div class="ui-g-12">
                <div class="card">
                    <h1>Global Booking Category Configuration</h1>
                    From this page, the global pool of booking categories can be managed. Keep in mind any editing of this pool can result in the changing of historic data! Please be very mindful when managing this data.

                    <h1>Add Booking Category</h1>
                    Adding a new booking category allows teams to allow this dice side category to be configured in the employee's dice and show up as a category in statistical groupings.
                    <h:form id="categoryForm">
                    <p:messages id="msgs" for="msgs"/>
                    <div class="ui-g">
                        <div class="ui-g-5">
                            <div class="ui-g-3 input-form">
                                <p:outputLabel for="categoryName" value="Category Name: "/>
                            </div>
                            <div class="ui-g-6 input-form">
                                <p:inputText id="categoryName"
                                             value="#{bookingCategoryController.newCategoryName}"
                                             disabled="false"
                                             label="Category Name" style="width:100%"/>
                            </div>
                            <div class="ui-g-2 input-form">
                            <p:commandButton value="Save"
                                             action="#{bookingCategoryController.saveNewCategory}"
                                             ajax="true"
                                             icon="fa fa-fw fa-save"
                                             validateClient="true"
                                             update="growl msgs">
                            </p:commandButton>
                         </div>
                        </div>
                    </div>
                    <div class="ui-g-6">

                    </div>
                    </h:form>
                    <h1>Current Booking Categories</h1>
                    <h:form id="categoriesForm">
                        <p:dataTable id="categoryTable" var="category" scrollable="true" style="width:100%" scrollHeight="500" value="#{bookingCategoryController.allBookingCategories}">
                            <p:column headerText="ID">
                                <h:outputText value="#{category.id}" />
                            </p:column>

                            <p:column headerText="Name">
                                <h:outputText value="#{category.name}" />
                            </p:column>

                            <p:column headerText="Used by teams">
                                <h:outputText value="#{category.teams}" />
                            </p:column>

                            <p:column style="width:100px;text-align: center">
                                <p:linkButton icon="fa fa-fw fa-edit"
                                              title="Edit"
                                              outcome="booking-category">
                                    <f:param name="category" value="#{category.id}" />
                                </p:linkButton>
                                <p:commandButton action="#{bookingCategoryController.deleteCategory()}" icon="fa fa-fw fa-trash" title="Delete" update=":categoriesForm:categoryTable">
                                    <f:setPropertyActionListener value="#{category}" target="#{bookingCategoryController.category}" />
                                    <p:confirm header="Confirmation" message="Are you sure that you want to delete this booking category? You cannot undo this operation." icon="ui-icon-alert" />
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                    </h:form>


                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" width="300">
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="fa fa-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="fa fa-close" />
                    </p:confirmDialog>
                </div>
            </div>
        </div>

    </ui:define>

</ui:composition>