<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="title">Prodiga Statistics</ui:define>
    <ui:define name="viewname">
        <li>Pages</li>
        <li>/</li>
        <li><p:link outcome="/statistics/statistics">Statistics</p:link></li>
        <li>/</li>
    </ui:define>
    <f:metadata>
        <f:event type="preRenderView" listener="#{statisticsController.statisticsInit}"/>
    </f:metadata>

    <ui:define name="head">
        <script type="text/javascript">
            function skinChart() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#e02365', '#2D8EE3', '#44be2c', '#eeb210'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#dce2e7',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    borderWidth: 0.1,
                    borderColor: 'd8dae2',
                    rendererOptions: {
                        textColor: '#434560'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 1,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }

            function skinBar() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#e02365', '#2D8EE3'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#d8dae2',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    borderWidth: 0.1,
                    borderColor: 'd8dae2',
                    rendererOptions: {
                        textColor: '#434560'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 1,
                    renderer: $.jqplot.BarRenderer,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }

            function skinArea() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#e02365', '#2D8EE3'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#dce2e7',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    borderWidth: 0.1,
                    borderColor: 'd8dae2',
                    rendererOptions: {
                        textColor: '#434560'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 1,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }

            function skinBubble() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#e02365', '#2D8EE3'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#d8dae2',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#434560'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 1,
                    renderer: $.jqplot.BubbleRenderer,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }

            function skinZoom() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#e02365', '#2D8EE3'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#d8dae2',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#434560'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 1,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }

            function skinPie() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                //this.cfg.seriesColors = ['#e02365', '#2D8EE3', '#44be2c', '#eeb210', '#AB44BC', '#2162b0', '#FFD000', '#ff2c00', '#00d0ff', '#b9ff00', '#ffb900', '#1a8f0a'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#dce2e7',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#434560',
                    }
                };
                this.cfg.seriesDefaults = {
                    renderer: $.jqplot.PieRenderer,
                    shadow: false,
                    lineWidth: 1,
                    markerOptions: {
                        shadow: false,
                        size: 30,
                        style: 'circle'
                    }
                }
            }

            function skinDonut() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#e02365', '#2D8EE3', '#44be2c', '#eeb210'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#d8dae2',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#434560',
                    }
                };
                this.cfg.seriesDefaults = {
                    renderer: $.jqplot.DonutRenderer,
                    shadow: false,
                    lineWidth: 1,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }

            function skinBarAndLine() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#e02365', '#2D8EE3'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#d8dae2',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    borderWidth: 0.1,
                    borderColor: 'd8dae2',
                    rendererOptions: {
                        textColor: '#434560'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 5,
                    renderer: $.jqplot.BarRenderer,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }

            function skinMeterGauge() {
                this.cfg.title = '';
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 5,
                    renderer: $.jqplot.MeterGaugeRenderer,
                    rendererOptions: {
                        shadow: false,
                        min: 100,
                        max: 800,
                        intervals: [200, 300, 400, 500, 600, 700, 800],
                        intervalColors: ['#e02365', '#2D8EE3', '#44be2c', '#eeb210', '#AB44BC', '#2162b0', '#FFD000']
                    }
                }
            }

            function skinMultiAxis() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#e02365', '#2D8EE3'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#d8dae2',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    borderWidth: 0.1,
                    borderColor: 'bdc3c9',
                    rendererOptions: {
                        textColor: '#434560'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth:1,
                    renderer: $.jqplot.BarRenderer,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }
        </script>
        <style type="text/css">
            .jqplot-xaxis-label, .jqplot-yaxis-label, .jqplot-y2axis-label, .jqplot-x2axis-label {
                color: #757575;
            }

            table.jqplot-table-legend {
                background-color: #ffffff;
                color: #434560;
                border-color: #d8dae2;
            }
        </style>
    </ui:define>

    <ui:define name="content">
        <h:form id="colorForm">
            <div class="ui-g">

            <div class="ui-g-5">
                <h1>Statistic Overview</h1>
                <p:outputLabel value="You can choose your own colors if you are not happy with the colors in the statistics below. Therefore choose a color and a booking category and then click on the button 'Save and Reload'. Now you should see your selected color for this booking in each statistic below. Reply this for each booking category you want to recolor." />
                <h:panelGrid columns="2" cellpadding="5">
                    <p:outputLabel value="Choose a color: " />
                    <p:colorPicker value="#{statisticsController.actualColor}" />

                    <p:outputLabel for="bookingName" value="Choose a category: " />
                <p:selectOneMenu id="bookingName" value="#{statisticsController.bookingName}">
                    <f:selectItems value="#{bookingCategoryController.allBookingCategories}" var="cat" itemLabel="#{cat.name}" itemValue="#{cat.name}"/>
                </p:selectOneMenu>
                </h:panelGrid>
            </div>
            </div>
            <div class="ui-g">
                <div class="ui-g-10" align="right">
                    <p:commandButton value="Save and Reload"
                                     action="#{statisticsController.doSaveColorByCategory(statisticsController.bookingName,statisticsController.actualColor)}"
                                     ajax="true"
                                     icon="fa fa-fw fa-refresh"
                                     update="growl colorForm">
                    </p:commandButton>
                </div>
            </div>

        <p:separator />

            <div class="ui-g">
                <div class="ui-g-5">
                    <p:outputLabel value="In the calendar below you can select a Day and then click on the 'Save and Reload' button on the right. Now the charts are updated so that you can see the daily pie chart of the chosen day, the weekly pie chart of the week where you chosen day is in and the monthly pie chart for the month of your chosen day." />

                    <h:panelGrid columns="2" cellpadding="5">
                        <p:outputLabel for="selectDate" value="Select a Day:" />
                        <p:calendar id="selectDate" value="#{statisticsController.selectedDate}" required="false" disabledWeekends="true" locale="en_GB"/>
                    </h:panelGrid>
                </div>
            </div>

            <div class="ui-g">
                <div class="ui-g-10" align="right">
                    <p:commandButton value="Save and Reload"
                                     action="#{statisticsController.verifyBackstepUser()}"
                                     ajax="true"
                                     icon="fa fa-fw fa-refresh"
                                     update="growl colorForm">
                    </p:commandButton>
                </div>
            </div>

            <p:separator />

        <div class="ui-g">
            <div class="ui-g-5">
                <div class="card">

                    <h1 class="centerText">Daily Pie Chart User</h1>
                    <p:pieChart id="pie" type="pie" model="#{statisticsController.dailyAnalysisPie}" responsive="true"/>

                </div>
            </div>
            <div class="ui-g-5">
                <div class="card">
                    <h1 class="centerText">Weekly Pie Chart User</h1>
                    <p:pieChart id="pie2" type="pie" model="#{statisticsController.weeklyAnalysisPie}" responsive="true"/>
                </div>
            </div>
            <div class="ui-g-5">
                <div class="card">
                    <h1 class="centerText">Monthly Pie Chart User</h1>
                    <p:pieChart id="pie3" type="pie" model="#{statisticsController.monthlyAnalysisPie}" responsive="true"/>
                </div>
            </div>
            <h:panelGroup layout="block" rendered="#{prodigaUserLoginManager.hasRole('TEAMLEADER')}">
            <div class="ui-g-5" >
                <div class="card">
                    <h1 class="centerText" >Weekly Pie Chart Team</h1>
                    <p:pieChart id="pie4" type="pie" model="#{statisticsController.weeklyTeamAnalysisPie}" responsive="true"/>
                </div>
            </div>
            <div class="ui-g-5">
                <div class="card">
                    <h1 class="centerText">Monthly Pie Chart Team</h1>
                    <p:pieChart id="pie5" type="pie" model="#{statisticsController.monthlyTeamAnalysisPie}" responsive="true"/>
                </div>
            </div>
            </h:panelGroup>
            <h:panelGroup layout="block" rendered="#{prodigaUserLoginManager.hasRole('DEPARTMENTLEADER') or prodigaUserLoginManager.hasRole('ADMIN')}">
            <div class="ui-g-5">
                <div class="card">
                    <h1 class="centerText">Monthly Pie Chart Department</h1>
                    <p:pieChart id="pie6" type="pie" model="#{statisticsController.monthlyDepartmentAnalysisPie}" responsive="true"/>
                </div>
            </div>
            </h:panelGroup>
        </div>
        </h:form>

    </ui:define>

</ui:composition>